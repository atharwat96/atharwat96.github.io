<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OrthoAssist — Practice Management</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
:root {
  --navy:    #0a2540;
  --navy2:   #0d2f4f;
  --blue:    #1a5fa8;
  --sky:     #3b9eff;
  --ice:     #e8f4fd;
  --ice2:    #f4f9ff;
  --white:   #ffffff;
  --muted:   #8da4be;
  --muted2:  #b8cfe4;
  --text:    #1a2e42;
  --border:  #ddeaf6;
  --error:   #d64045;
  --success: #2e9e6b;
  --warning: #e8930a;
  --sidebar-w: 240px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--navy);
  color: var(--text);
  min-height: 100vh;
  overflow: hidden;
}

/* ═══════════════════════════════════════
   LOGIN PAGE
═══════════════════════════════════════ */
#loginPage {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}
#loginPage::before {
  content: '';
  position: fixed;
  top: -30%; right: -15%;
  width: 70vw; height: 70vw;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(59,158,255,0.12) 0%, transparent 70%);
  pointer-events: none;
}
#loginPage::after {
  content: '';
  position: fixed;
  bottom: -20%; left: -10%;
  width: 50vw; height: 50vw;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(26,95,168,0.18) 0%, transparent 70%);
  pointer-events: none;
}
.grid-bg {
  position: fixed; inset: 0;
  background-image:
    linear-gradient(rgba(59,158,255,0.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59,158,255,0.04) 1px, transparent 1px);
  background-size: 60px 60px;
  pointer-events: none;
}
.login-container {
  display: flex;
  width: min(900px, 95vw);
  min-height: 540px;
  position: relative;
  z-index: 1;
  animation: fadeUp 0.7s ease both;
}
.login-left {
  flex: 1;
  background: linear-gradient(145deg, var(--blue) 0%, #0d3d7a 100%);
  border-radius: 20px 0 0 20px;
  padding: 50px 40px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  position: relative;
  overflow: hidden;
}
.login-left::before {
  content: ''; position: absolute;
  top: -40px; right: -40px;
  width: 200px; height: 200px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.08);
}
.login-left::after {
  content: ''; position: absolute;
  bottom: -60px; left: -60px;
  width: 280px; height: 280px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.06);
}
.brand { position: relative; z-index: 1; }
.brand-icon {
  width: 52px; height: 52px;
  background: rgba(255,255,255,0.12);
  border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 20px;
  border: 1px solid rgba(255,255,255,0.15);
}
.brand-icon svg { width: 28px; height: 28px; }
.brand-name {
  font-family: 'Cormorant Garamond', serif;
  font-size: 2rem; font-weight: 600;
  color: #fff; letter-spacing: -0.02em; line-height: 1;
}
.brand-sub { font-size: 0.72rem; color: rgba(255,255,255,0.5); letter-spacing: 0.12em; text-transform: uppercase; margin-top: 6px; }
.panel-info { position: relative; z-index: 1; }
.panel-title { font-family: 'Cormorant Garamond', serif; font-size: 1.6rem; font-weight: 300; color: #fff; line-height: 1.3; margin-bottom: 12px; }
.panel-desc { font-size: 0.82rem; color: rgba(255,255,255,0.5); line-height: 1.7; }
.feature-list { position: relative; z-index: 1; list-style: none; }
.feature-list li { display: flex; align-items: center; gap: 10px; font-size: 0.78rem; color: rgba(255,255,255,0.6); padding: 6px 0; border-top: 1px solid rgba(255,255,255,0.06); }
.feature-list li:last-child { border-bottom: 1px solid rgba(255,255,255,0.06); }
.dot { width: 6px; height: 6px; border-radius: 50%; background: var(--sky); flex-shrink: 0; }
.login-right {
  flex: 1.1;
  background: var(--white);
  border-radius: 0 20px 20px 0;
  padding: 50px 44px;
  display: flex; flex-direction: column; justify-content: center;
}
.form-eyebrow { font-size: 0.7rem; letter-spacing: 0.15em; text-transform: uppercase; color: var(--sky); font-weight: 500; margin-bottom: 8px; }
.form-title { font-family: 'Cormorant Garamond', serif; font-size: 2.1rem; font-weight: 600; color: var(--navy); letter-spacing: -0.02em; }
.form-subtitle { font-size: 0.82rem; color: var(--muted); margin-top: 6px; margin-bottom: 32px; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; font-size: 0.75rem; font-weight: 500; color: var(--navy); letter-spacing: 0.03em; margin-bottom: 7px; }
.input-wrap { position: relative; }
.input-wrap > svg:first-child {
  position: absolute; left: 14px; top: 50%; transform: translateY(-50%);
  width: 16px; height: 16px; color: var(--muted); pointer-events: none;
}
.input-wrap input {
  width: 100%; padding: 13px 14px 13px 42px;
  border: 1.5px solid var(--border); border-radius: 10px;
  font-family: 'DM Sans', sans-serif; font-size: 0.88rem; color: var(--navy);
  background: var(--ice2); outline: none;
  transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
}
.input-wrap input:focus { border-color: var(--sky); background: #fff; box-shadow: 0 0 0 4px rgba(59,158,255,0.1); }
.toggle-pass { position: absolute; right: 14px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: var(--muted); display: flex; align-items: center; }
.toggle-pass:hover { color: var(--blue); }
.toggle-pass svg { width: 16px; height: 16px; }
.error-msg {
  display: none; align-items: center; gap: 7px;
  background: #fff0f0; border: 1px solid #f7c5c5;
  border-radius: 8px; padding: 10px 14px;
  font-size: 0.78rem; color: var(--error);
  margin-bottom: 18px;
  animation: shake 0.4s ease;
}
.error-msg.show { display: flex; }
.error-msg svg { width: 15px; height: 15px; flex-shrink: 0; }
.btn-primary {
  width: 100%; padding: 14px;
  background: linear-gradient(135deg, var(--blue) 0%, #0d3d7a 100%);
  color: #fff; border: none; border-radius: 10px;
  font-family: 'DM Sans', sans-serif; font-size: 0.9rem; font-weight: 500;
  cursor: pointer; letter-spacing: 0.03em;
  transition: transform 0.15s, box-shadow 0.15s;
  box-shadow: 0 4px 20px rgba(26,95,168,0.35);
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: 0 6px 24px rgba(26,95,168,0.45); }
.btn-primary:active { transform: translateY(0); }
.btn-primary:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
.btn-primary .spinner { display: none; width: 16px; height: 16px; border: 2px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 0.6s linear infinite; margin: 0 auto; }
.btn-primary.loading .btn-text { display: none; }
.btn-primary.loading .spinner { display: block; }
.secure-note { margin-top: 24px; padding-top: 18px; border-top: 1px solid var(--border); font-size: 0.72rem; color: var(--muted); display: flex; align-items: center; gap: 6px; }
.secure-note svg { width: 13px; height: 13px; color: var(--success); }

/* ═══════════════════════════════════════
   APP SHELL
═══════════════════════════════════════ */
#appShell {
  display: none;
  height: 100vh;
  background: var(--ice2);
}
#appShell.show { display: flex; }

/* Sidebar */
.sidebar {
  width: var(--sidebar-w);
  background: var(--navy);
  height: 100vh;
  display: flex; flex-direction: column;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}
.sidebar::after {
  content: '';
  position: absolute; bottom: -80px; right: -80px;
  width: 200px; height: 200px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(59,158,255,0.08), transparent 70%);
  pointer-events: none;
}
.sidebar-logo {
  padding: 28px 22px 22px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}
.sidebar-logo .brand-name { font-size: 1.4rem; }
.sidebar-logo .brand-sub { font-size: 0.65rem; }
.sidebar-logo .brand-icon { width: 38px; height: 38px; border-radius: 10px; margin-bottom: 14px; }
.sidebar-logo .brand-icon svg { width: 20px; height: 20px; }
.sidebar-nav { flex: 1; padding: 16px 12px; overflow-y: auto; }
.nav-section-label { font-size: 0.6rem; letter-spacing: 0.14em; text-transform: uppercase; color: rgba(255,255,255,0.3); font-weight: 500; padding: 12px 10px 6px; }
.nav-item {
  display: flex; align-items: center; gap: 11px;
  padding: 10px 12px; border-radius: 10px;
  font-size: 0.82rem; color: rgba(255,255,255,0.55);
  cursor: pointer; margin-bottom: 2px;
  transition: background 0.15s, color 0.15s;
}
.nav-item svg { width: 17px; height: 17px; flex-shrink: 0; }
.nav-item:hover { background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.85); }
.nav-item.active { background: rgba(59,158,255,0.15); color: var(--sky); }
.nav-item .badge { margin-left: auto; background: var(--sky); color: #fff; font-size: 0.65rem; padding: 1px 7px; border-radius: 20px; font-weight: 500; }
.sidebar-user {
  padding: 16px 16px 20px;
  border-top: 1px solid rgba(255,255,255,0.06);
}
.user-card { display: flex; align-items: center; gap: 11px; }
.user-avatar {
  width: 36px; height: 36px;
  background: linear-gradient(135deg, var(--blue), var(--sky));
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Cormorant Garamond', serif;
  font-size: 1rem; font-weight: 600; color: #fff;
  flex-shrink: 0;
}
.user-name { font-size: 0.82rem; font-weight: 500; color: rgba(255,255,255,0.85); }
.user-role { font-size: 0.7rem; color: rgba(255,255,255,0.35); }
.logout-btn { margin-left: auto; background: none; border: none; cursor: pointer; color: rgba(255,255,255,0.3); transition: color 0.15s; }
.logout-btn:hover { color: rgba(255,255,255,0.7); }
.logout-btn svg { width: 16px; height: 16px; }

/* Main area */
.main-area { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.topbar {
  background: var(--white);
  padding: 0 28px;
  height: 62px;
  display: flex; align-items: center; gap: 16px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.topbar-title { font-family: 'Cormorant Garamond', serif; font-size: 1.4rem; font-weight: 600; color: var(--navy); }
.topbar-date { font-size: 0.78rem; color: var(--muted); margin-left: 2px; }
.topbar-spacer { flex: 1; }
.topbar-search {
  display: flex; align-items: center; gap: 8px;
  background: var(--ice2); border: 1.5px solid var(--border);
  border-radius: 9px; padding: 7px 14px; width: 220px;
}
.topbar-search svg { width: 15px; height: 15px; color: var(--muted); flex-shrink: 0; }
.topbar-search input { border: none; outline: none; background: none; font-family: 'DM Sans', sans-serif; font-size: 0.82rem; color: var(--text); width: 100%; }
.topbar-search input::placeholder { color: var(--muted); }
.topbar-btn {
  width: 36px; height: 36px;
  border: 1.5px solid var(--border);
  border-radius: 9px;
  background: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  color: var(--muted); transition: border-color 0.15s, color 0.15s;
}
.topbar-btn:hover { border-color: var(--sky); color: var(--sky); }
.topbar-btn svg { width: 16px; height: 16px; }
.notif-dot { position: relative; }
.notif-dot::after {
  content: ''; position: absolute;
  top: 6px; right: 6px;
  width: 7px; height: 7px;
  border-radius: 50%; background: var(--sky);
  border: 2px solid var(--white);
}

.content-area { flex: 1; overflow-y: auto; padding: 28px; }

/* Pages */
.page { display: none; animation: fadeUp 0.3s ease; }
.page.active { display: block; }

/* ═══════════════════════════════════════
   DASHBOARD PAGE
═══════════════════════════════════════ */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 18px;
  margin-bottom: 24px;
}
.stat-card {
  background: var(--white);
  border-radius: 14px;
  padding: 22px 22px 18px;
  border: 1px solid var(--border);
  position: relative;
  overflow: hidden;
  transition: transform 0.15s, box-shadow 0.15s;
}
.stat-card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(26,95,168,0.1); }
.stat-card::after {
  content: '';
  position: absolute; top: 0; left: 0;
  height: 3px; width: 100%;
}
.stat-card.blue::after { background: linear-gradient(90deg, var(--blue), var(--sky)); }
.stat-card.green::after { background: linear-gradient(90deg, #2e9e6b, #43c98b); }
.stat-card.orange::after { background: linear-gradient(90deg, #e8930a, #f5b43e); }
.stat-card.red::after { background: linear-gradient(90deg, #d64045, #f07277); }
.stat-icon { width: 38px; height: 38px; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 14px; }
.stat-icon svg { width: 19px; height: 19px; }
.stat-icon.blue { background: rgba(59,158,255,0.12); color: var(--blue); }
.stat-icon.green { background: rgba(46,158,107,0.12); color: #2e9e6b; }
.stat-icon.orange { background: rgba(232,147,10,0.12); color: #e8930a; }
.stat-icon.red { background: rgba(214,64,69,0.12); color: #d64045; }
.stat-value { font-family: 'Cormorant Garamond', serif; font-size: 2.2rem; font-weight: 600; color: var(--navy); line-height: 1; margin-bottom: 4px; }
.stat-label { font-size: 0.78rem; color: var(--muted); }
.stat-trend { font-size: 0.72rem; color: var(--success); margin-top: 8px; }

.dash-grid { display: grid; grid-template-columns: 1fr 360px; gap: 18px; }

.card {
  background: var(--white);
  border-radius: 14px;
  border: 1px solid var(--border);
  overflow: hidden;
}
.card-header {
  padding: 18px 22px 14px;
  display: flex; align-items: center; justify-content: space-between;
  border-bottom: 1px solid var(--border);
}
.card-title { font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; font-weight: 600; color: var(--navy); }
.card-action { font-size: 0.75rem; color: var(--sky); cursor: pointer; font-weight: 500; }
.card-action:hover { text-decoration: underline; }
.card-body { padding: 16px 22px; }

/* Today's appointments in dashboard */
.appt-list { list-style: none; }
.appt-item {
  display: flex; align-items: center; gap: 14px;
  padding: 11px 0;
  border-bottom: 1px solid var(--border);
}
.appt-item:last-child { border-bottom: none; }
.appt-time { font-size: 0.75rem; color: var(--muted); width: 56px; flex-shrink: 0; font-weight: 500; }
.appt-avatar {
  width: 34px; height: 34px; border-radius: 9px;
  background: linear-gradient(135deg, var(--blue), var(--sky));
  display: flex; align-items: center; justify-content: center;
  font-family: 'Cormorant Garamond', serif; font-size: 0.9rem; color: #fff; font-weight: 600;
  flex-shrink: 0;
}
.appt-info { flex: 1; min-width: 0; }
.appt-name { font-size: 0.84rem; font-weight: 500; color: var(--text); }
.appt-reason { font-size: 0.74rem; color: var(--muted); margin-top: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.status-badge {
  font-size: 0.68rem; font-weight: 500; padding: 3px 10px; border-radius: 20px; flex-shrink: 0;
}
.status-confirmed { background: rgba(46,158,107,0.1); color: #2e9e6b; }
.status-pending { background: rgba(232,147,10,0.1); color: #e8930a; }
.status-cancelled { background: rgba(214,64,69,0.1); color: #d64045; }

/* Activity feed */
.activity-list { list-style: none; }
.activity-item { display: flex; align-items: flex-start; gap: 12px; padding: 10px 0; border-bottom: 1px solid var(--border); }
.activity-item:last-child { border-bottom: none; }
.activity-dot-wrap { display: flex; flex-direction: column; align-items: center; padding-top: 4px; }
.activity-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
.activity-dot.blue { background: var(--sky); }
.activity-dot.green { background: var(--success); }
.activity-dot.orange { background: var(--warning); }
.activity-text { font-size: 0.8rem; color: var(--text); line-height: 1.5; }
.activity-text span { font-weight: 500; color: var(--navy); }
.activity-time { font-size: 0.7rem; color: var(--muted); margin-top: 2px; }

/* Upcoming surgeries */
.surgery-item { display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid var(--border); }
.surgery-item:last-child { border-bottom: none; }
.surgery-date { text-align: center; width: 40px; flex-shrink: 0; }
.surgery-date-day { font-family: 'Cormorant Garamond', serif; font-size: 1.4rem; font-weight: 600; color: var(--blue); line-height: 1; }
.surgery-date-mon { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); }
.surgery-info { flex: 1; }
.surgery-name { font-size: 0.83rem; font-weight: 500; color: var(--text); }
.surgery-proc { font-size: 0.73rem; color: var(--muted); margin-top: 1px; }
.surgery-time { font-size: 0.72rem; color: var(--muted); }

/* ═══════════════════════════════════════
   PATIENTS PAGE
═══════════════════════════════════════ */
.page-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 22px; }
.page-heading { font-family: 'Cormorant Garamond', serif; font-size: 1.7rem; font-weight: 600; color: var(--navy); }
.page-sub { font-size: 0.8rem; color: var(--muted); margin-top: 2px; }
.btn-add {
  display: flex; align-items: center; gap: 8px;
  background: linear-gradient(135deg, var(--blue), #0d3d7a);
  color: #fff; border: none; border-radius: 10px;
  padding: 10px 18px; font-family: 'DM Sans', sans-serif;
  font-size: 0.82rem; font-weight: 500; cursor: pointer;
  box-shadow: 0 4px 14px rgba(26,95,168,0.3);
  transition: transform 0.15s, box-shadow 0.15s;
}
.btn-add:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(26,95,168,0.4); }
.btn-add svg { width: 15px; height: 15px; }

.filter-bar { display: flex; align-items: center; gap: 10px; margin-bottom: 18px; }
.filter-search {
  display: flex; align-items: center; gap: 8px;
  background: var(--white); border: 1.5px solid var(--border);
  border-radius: 10px; padding: 9px 14px; flex: 1; max-width: 320px;
}
.filter-search svg { width: 15px; height: 15px; color: var(--muted); flex-shrink: 0; }
.filter-search input { border: none; outline: none; background: none; font-family: 'DM Sans', sans-serif; font-size: 0.83rem; color: var(--text); width: 100%; }
.filter-btn {
  padding: 9px 16px; border-radius: 10px; font-size: 0.8rem; font-weight: 500;
  border: 1.5px solid var(--border); background: var(--white); color: var(--muted);
  cursor: pointer; transition: all 0.15s;
}
.filter-btn.active { border-color: var(--sky); background: rgba(59,158,255,0.08); color: var(--blue); }

.patients-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
.patient-card {
  background: var(--white); border-radius: 14px; border: 1px solid var(--border);
  padding: 20px; cursor: pointer;
  transition: transform 0.15s, box-shadow 0.15s, border-color 0.15s;
}
.patient-card:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(26,95,168,0.1); border-color: rgba(59,158,255,0.3); }
.patient-card-top { display: flex; align-items: flex-start; gap: 13px; margin-bottom: 14px; }
.patient-avatar-lg {
  width: 44px; height: 44px; border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; font-weight: 600; color: #fff;
  flex-shrink: 0;
}
.patient-avatar-lg.c1 { background: linear-gradient(135deg, #1a5fa8, #3b9eff); }
.patient-avatar-lg.c2 { background: linear-gradient(135deg, #2e9e6b, #43c98b); }
.patient-avatar-lg.c3 { background: linear-gradient(135deg, #7c4dff, #b388ff); }
.patient-avatar-lg.c4 { background: linear-gradient(135deg, #e8930a, #f5c842); }
.patient-avatar-lg.c5 { background: linear-gradient(135deg, #d64045, #f07277); }
.patient-name { font-size: 0.95rem; font-weight: 500; color: var(--navy); }
.patient-meta { font-size: 0.75rem; color: var(--muted); margin-top: 2px; }
.patient-id { font-size: 0.7rem; color: var(--muted2); margin-top: 2px; font-family: monospace; letter-spacing: 0.05em; }
.patient-diag {
  background: var(--ice2); border-radius: 8px; padding: 9px 12px;
  font-size: 0.78rem; color: var(--text); margin-bottom: 12px;
  border-left: 3px solid var(--blue);
}
.patient-diag-label { font-size: 0.68rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); margin-bottom: 2px; }
.patient-card-footer { display: flex; align-items: center; justify-content: space-between; }
.patient-visits { font-size: 0.75rem; color: var(--muted); }
.patient-visits span { color: var(--navy); font-weight: 500; }
.patient-btn {
  font-size: 0.75rem; color: var(--sky); font-weight: 500;
  background: none; border: none; cursor: pointer;
  display: flex; align-items: center; gap: 4px;
}
.patient-btn:hover { text-decoration: underline; }
.patient-btn svg { width: 13px; height: 13px; }

/* Patient detail panel */
.patient-detail-overlay {
  position: fixed; inset: 0;
  background: rgba(10, 37, 64, 0.5);
  backdrop-filter: blur(4px);
  z-index: 200; display: none;
  align-items: center; justify-content: flex-end;
}
.patient-detail-overlay.show { display: flex; animation: fadeIn 0.2s ease; }
.patient-detail-panel {
  width: min(520px, 96vw);
  height: 100vh; background: var(--white);
  overflow-y: auto; padding: 32px;
  animation: slideLeft 0.3s ease;
}
@keyframes slideLeft {
  from { transform: translateX(40px); opacity: 0; }
  to   { transform: translateX(0); opacity: 1; }
}
.detail-close {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 28px;
}
.detail-close-btn {
  width: 34px; height: 34px; border-radius: 9px;
  border: 1.5px solid var(--border); background: none;
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  color: var(--muted); transition: all 0.15s;
}
.detail-close-btn:hover { border-color: var(--error); color: var(--error); }
.detail-close-btn svg { width: 16px; height: 16px; }
.detail-section { margin-bottom: 24px; }
.detail-section-title {
  font-size: 0.68rem; text-transform: uppercase; letter-spacing: 0.12em;
  color: var(--muted); font-weight: 500; margin-bottom: 12px;
  display: flex; align-items: center; gap: 8px;
}
.detail-section-title::after { content: ''; flex: 1; height: 1px; background: var(--border); }
.detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.detail-field label { font-size: 0.7rem; color: var(--muted); margin-bottom: 3px; display: block; }
.detail-field p { font-size: 0.85rem; color: var(--text); font-weight: 400; }
.detail-field p.highlight { color: var(--navy); font-weight: 500; }
.visit-item { padding: 10px 0; border-bottom: 1px solid var(--border); display: flex; gap: 12px; align-items: flex-start; }
.visit-item:last-child { border-bottom: none; }
.visit-date-badge { background: var(--ice2); border-radius: 8px; padding: 5px 10px; text-align: center; flex-shrink: 0; min-width: 52px; }
.visit-date-badge .vd { font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; font-weight: 600; color: var(--blue); }
.visit-date-badge .vm { font-size: 0.65rem; color: var(--muted); text-transform: uppercase; }
.visit-info .vi-type { font-size: 0.82rem; font-weight: 500; color: var(--text); }
.visit-info .vi-note { font-size: 0.75rem; color: var(--muted); margin-top: 2px; }

/* ═══════════════════════════════════════
   APPOINTMENTS PAGE
═══════════════════════════════════════ */
.appt-page-grid { display: grid; grid-template-columns: 1fr 340px; gap: 18px; align-items: start; }

.week-nav { display: flex; align-items: center; gap: 10px; margin-bottom: 18px; }
.week-nav-btn {
  width: 32px; height: 32px; border-radius: 8px;
  border: 1.5px solid var(--border); background: var(--white);
  cursor: pointer; display: flex; align-items: center; justify-content: center;
  color: var(--muted); transition: all 0.15s;
}
.week-nav-btn:hover { border-color: var(--sky); color: var(--sky); }
.week-nav-btn svg { width: 14px; height: 14px; }
.week-label { font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; font-weight: 600; color: var(--navy); }

.day-columns { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
.day-col { }
.day-col-header {
  text-align: center; padding: 10px 6px; border-radius: 10px;
  margin-bottom: 10px;
}
.day-col-header.today { background: rgba(59,158,255,0.1); }
.day-col-header .dc-dow { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--muted); }
.day-col-header .dc-date { font-family: 'Cormorant Garamond', serif; font-size: 1.4rem; font-weight: 600; color: var(--navy); line-height: 1; margin-top: 2px; }
.day-col-header.today .dc-date { color: var(--blue); }
.appt-block {
  border-radius: 10px; padding: 10px 12px; margin-bottom: 8px; cursor: pointer;
  border-left: 3px solid transparent; transition: transform 0.15s;
}
.appt-block:hover { transform: translateY(-1px); }
.appt-block.confirmed { background: rgba(46,158,107,0.08); border-color: var(--success); }
.appt-block.pending   { background: rgba(232,147,10,0.08); border-color: var(--warning); }
.appt-block.cancelled { background: rgba(214,64,69,0.06); border-color: var(--error); opacity: 0.7; }
.appt-block-time { font-size: 0.68rem; color: var(--muted); margin-bottom: 3px; }
.appt-block-name { font-size: 0.78rem; font-weight: 500; color: var(--text); }
.appt-block-reason { font-size: 0.7rem; color: var(--muted); margin-top: 1px; }
.appt-block-dur { font-size: 0.67rem; color: var(--muted2); margin-top: 4px; }

/* New appointment form */
.appt-form-card { background: var(--white); border-radius: 14px; border: 1px solid var(--border); overflow: hidden; }
.appt-form-body { padding: 20px; }
.form-field { margin-bottom: 16px; }
.form-field label { display: block; font-size: 0.75rem; font-weight: 500; color: var(--navy); margin-bottom: 6px; }
.form-field input, .form-field select, .form-field textarea {
  width: 100%; padding: 10px 13px;
  border: 1.5px solid var(--border); border-radius: 9px;
  font-family: 'DM Sans', sans-serif; font-size: 0.83rem; color: var(--text);
  background: var(--ice2); outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.form-field input:focus, .form-field select:focus, .form-field textarea:focus {
  border-color: var(--sky); background: #fff; box-shadow: 0 0 0 3px rgba(59,158,255,0.1);
}
.form-field textarea { resize: vertical; min-height: 70px; }
.form-field select { appearance: none; cursor: pointer; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.btn-submit {
  width: 100%; padding: 11px;
  background: linear-gradient(135deg, var(--blue), #0d3d7a);
  color: #fff; border: none; border-radius: 9px;
  font-family: 'DM Sans', sans-serif; font-size: 0.85rem; font-weight: 500;
  cursor: pointer; box-shadow: 0 4px 14px rgba(26,95,168,0.3);
  transition: transform 0.15s, box-shadow 0.15s;
}
.btn-submit:hover { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(26,95,168,0.4); }

.toast {
  position: fixed; bottom: 28px; right: 28px;
  background: var(--navy); color: #fff;
  padding: 13px 20px; border-radius: 12px;
  font-size: 0.82rem; display: flex; align-items: center; gap: 10px;
  box-shadow: 0 8px 28px rgba(0,0,0,0.3);
  z-index: 999; opacity: 0; transform: translateY(10px);
  transition: opacity 0.3s, transform 0.3s;
  pointer-events: none;
}
.toast.show { opacity: 1; transform: translateY(0); }
.toast svg { width: 16px; height: 16px; color: #4ecf8e; flex-shrink: 0; }

@keyframes fadeUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeIn  { from { opacity: 0; } to { opacity: 1; } }
@keyframes shake  { 0%,100%{transform:translateX(0)} 20%{transform:translateX(-6px)} 60%{transform:translateX(6px)} }
@keyframes spin   { to { transform: rotate(360deg); } }

::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; }
</style>
</head>
<body>

<div class="grid-bg"></div>

<!-- ═══════════ LOGIN PAGE ═══════════ -->
<div id="loginPage">
  <div class="login-container">
    <div class="login-left">
      <div class="brand">
        <div class="brand-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/>
          </svg>
        </div>
        <div class="brand-name">OrthoAssist</div>
        <div class="brand-sub">Practice Management System</div>
      </div>
      <div class="panel-info">
        <div class="panel-title">Your intelligent orthopedic practice companion</div>
        <div class="panel-desc">Streamline patient care, appointments, and clinical workflows — all in one secure platform.</div>
      </div>
      <ul class="feature-list">
        <li><span class="dot"></span>Patient records & history</li>
        <li><span class="dot"></span>Appointment scheduling</li>
        <li><span class="dot"></span>Clinical notes & imaging</li>
        <li><span class="dot"></span>AI-assisted documentation</li>
      </ul>
    </div>
    <div class="login-right">
      <div class="form-eyebrow">Secure Access</div>
      <div class="form-title">Welcome back, Doctor</div>
      <div class="form-subtitle">Sign in to access your practice dashboard</div>
      <div class="error-msg" id="loginError">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
        <span>Invalid username or password. Please try again.</span>
      </div>
      <div class="form-group">
        <label for="username">Username</label>
        <div class="input-wrap">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          <input type="text" id="username" placeholder="Enter your username" autocomplete="username" />
        </div>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <div class="input-wrap">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          <input type="password" id="password" placeholder="Enter your password" autocomplete="current-password" />
          <button class="toggle-pass" id="togglePass" type="button">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
          </button>
        </div>
      </div>
      <button class="btn-primary" id="loginBtn">
        <span class="btn-text">Sign In</span>
        <div class="spinner"></div>
      </button>
      <div class="secure-note">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        Secured connection · HIPAA-ready design
      </div>
    </div>
  </div>
</div>

<!-- ═══════════ APP SHELL ═══════════ -->
<div id="appShell">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-logo">
      <div class="brand-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/>
        </svg>
      </div>
      <div class="brand-name">OrthoAssist</div>
      <div class="brand-sub">Practice Management</div>
    </div>
    <nav class="sidebar-nav">
      <div class="nav-section-label">Main</div>
      <div class="nav-item active" data-page="dashboard">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
        Dashboard
      </div>
      <div class="nav-item" data-page="patients">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        Patients
        <span class="badge">24</span>
      </div>
      <div class="nav-item" data-page="appointments">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
        Appointments
      </div>
      <div class="nav-section-label">Clinical</div>
      <div class="nav-item" data-page="dashboard">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
        Clinical Notes
      </div>
      <div class="nav-item" data-page="dashboard">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="12" cy="12" r="3"/><path d="M12 3v3M12 18v3M3 12h3M18 12h3"/></svg>
        Imaging
      </div>
    </nav>
    <div class="sidebar-user">
      <div class="user-card">
        <div class="user-avatar">Dr</div>
        <div>
          <div class="user-name">Dr. Physician</div>
          <div class="user-role">Orthopedic Surgeon</div>
        </div>
        <button class="logout-btn" id="logoutBtn" title="Sign out">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Main -->
  <div class="main-area">
    <div class="topbar">
      <div>
        <div class="topbar-title" id="topbarTitle">Dashboard</div>
        <div class="topbar-date" id="topbarDate"></div>
      </div>
      <div class="topbar-spacer"></div>
      <div class="topbar-search">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <input type="text" placeholder="Search patients, appointments…" id="globalSearch" />
      </div>
      <button class="topbar-btn notif-dot" title="Notifications">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
      </button>
      <button class="topbar-btn" title="Settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
      </button>
    </div>

    <div class="content-area">

      <!-- ── DASHBOARD PAGE ── -->
      <div class="page active" id="page-dashboard">
        <div class="stats-grid">
          <div class="stat-card blue">
            <div class="stat-icon blue">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
            </div>
            <div class="stat-value">24</div>
            <div class="stat-label">Active Patients</div>
            <div class="stat-trend">↑ 3 new this month</div>
          </div>
          <div class="stat-card green">
            <div class="stat-icon green">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            </div>
            <div class="stat-value">8</div>
            <div class="stat-label">Today's Appointments</div>
            <div class="stat-trend">↑ 2 confirmed today</div>
          </div>
          <div class="stat-card orange">
            <div class="stat-icon orange">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
            </div>
            <div class="stat-value">3</div>
            <div class="stat-label">Upcoming Surgeries</div>
            <div class="stat-trend">Next: Feb 27</div>
          </div>
          <div class="stat-card red">
            <div class="stat-icon red">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            </div>
            <div class="stat-value">2</div>
            <div class="stat-label">Pending Follow-ups</div>
            <div class="stat-trend">Requires attention</div>
          </div>
        </div>

        <div class="dash-grid">
          <!-- Today's appointments -->
          <div class="card">
            <div class="card-header">
              <div class="card-title">Today's Schedule</div>
              <span class="card-action" onclick="navigate('appointments')">View all →</span>
            </div>
            <div class="card-body">
              <ul class="appt-list" id="todayApptList"></ul>
            </div>
          </div>

          <!-- Right column -->
          <div style="display:flex; flex-direction:column; gap:18px;">
            <!-- Upcoming surgeries -->
            <div class="card">
              <div class="card-header">
                <div class="card-title">Upcoming Surgeries</div>
              </div>
              <div class="card-body">
                <div class="surgery-item">
                  <div class="surgery-date"><div class="surgery-date-day">27</div><div class="surgery-date-mon">Feb</div></div>
                  <div class="surgery-info">
                    <div class="surgery-name">Ahmed Al-Rashidi</div>
                    <div class="surgery-proc">Total Knee Replacement</div>
                  </div>
                  <div class="surgery-time">07:30</div>
                </div>
                <div class="surgery-item">
                  <div class="surgery-date"><div class="surgery-date-day">03</div><div class="surgery-date-mon">Mar</div></div>
                  <div class="surgery-info">
                    <div class="surgery-name">Nadia Khoury</div>
                    <div class="surgery-proc">Rotator Cuff Repair</div>
                  </div>
                  <div class="surgery-time">09:00</div>
                </div>
                <div class="surgery-item">
                  <div class="surgery-date"><div class="surgery-date-day">10</div><div class="surgery-date-mon">Mar</div></div>
                  <div class="surgery-info">
                    <div class="surgery-name">Omar Mansour</div>
                    <div class="surgery-proc">Spinal Fusion L4–L5</div>
                  </div>
                  <div class="surgery-time">08:00</div>
                </div>
              </div>
            </div>
            <!-- Activity feed -->
            <div class="card">
              <div class="card-header">
                <div class="card-title">Recent Activity</div>
              </div>
              <div class="card-body">
                <ul class="activity-list">
                  <li class="activity-item">
                    <div class="activity-dot-wrap"><div class="activity-dot green"></div></div>
                    <div><div class="activity-text"><span>Fatima Al-Hassan</span> checked in for 09:00 appointment</div><div class="activity-time">8 min ago</div></div>
                  </li>
                  <li class="activity-item">
                    <div class="activity-dot-wrap"><div class="activity-dot blue"></div></div>
                    <div><div class="activity-text">New X-ray uploaded for <span>Khalid Ibrahim</span></div><div class="activity-time">32 min ago</div></div>
                  </li>
                  <li class="activity-item">
                    <div class="activity-dot-wrap"><div class="activity-dot orange"></div></div>
                    <div><div class="activity-text"><span>Yusuf Al-Najjar</span> appointment rescheduled to Mar 5</div><div class="activity-time">1 hr ago</div></div>
                  </li>
                  <li class="activity-item">
                    <div class="activity-dot-wrap"><div class="activity-dot green"></div></div>
                    <div><div class="activity-text">Clinical notes finalized for <span>Layla Qasim</span></div><div class="activity-time">2 hr ago</div></div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ── PATIENTS PAGE ── -->
      <div class="page" id="page-patients">
        <div class="page-header">
          <div>
            <div class="page-heading">Patients</div>
            <div class="page-sub">24 active patients in your practice</div>
          </div>
          <button class="btn-add" onclick="showToast('Add Patient form coming in next layer!')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Add Patient
          </button>
        </div>
        <div class="filter-bar">
          <div class="filter-search">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            <input type="text" placeholder="Search patients…" id="patientSearch" oninput="filterPatients(this.value)" />
          </div>
          <button class="filter-btn active" onclick="filterBy('all', this)">All</button>
          <button class="filter-btn" onclick="filterBy('knee', this)">Knee</button>
          <button class="filter-btn" onclick="filterBy('spine', this)">Spine</button>
          <button class="filter-btn" onclick="filterBy('shoulder', this)">Shoulder</button>
        </div>
        <div class="patients-grid" id="patientsGrid"></div>
      </div>

      <!-- ── APPOINTMENTS PAGE ── -->
      <div class="page" id="page-appointments">
        <div class="page-header">
          <div>
            <div class="page-heading">Appointments</div>
            <div class="page-sub" id="apptWeekSub"></div>
          </div>
        </div>
        <div class="appt-page-grid">
          <!-- Week view -->
          <div>
            <div class="week-nav">
              <button class="week-nav-btn" onclick="changeWeek(-1)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
              </button>
              <div class="week-label" id="weekLabel"></div>
              <button class="week-nav-btn" onclick="changeWeek(1)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
              </button>
            </div>
            <div class="day-columns" id="weekColumns"></div>
          </div>
          <!-- New appointment form -->
          <div>
            <div class="appt-form-card">
              <div class="card-header">
                <div class="card-title">New Appointment</div>
              </div>
              <div class="appt-form-body">
                <div class="form-field">
                  <label>Patient</label>
                  <select id="newApptPatient">
                    <option value="">Select patient…</option>
                  </select>
                </div>
                <div class="form-field">
                  <label>Reason / Procedure</label>
                  <input type="text" id="newApptReason" placeholder="e.g. Follow-up, Consultation…" />
                </div>
                <div class="form-row">
                  <div class="form-field">
                    <label>Date</label>
                    <input type="date" id="newApptDate" />
                  </div>
                  <div class="form-field">
                    <label>Time</label>
                    <input type="time" id="newApptTime" />
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-field">
                    <label>Duration (min)</label>
                    <select id="newApptDuration">
                      <option value="15">15 min</option>
                      <option value="30" selected>30 min</option>
                      <option value="45">45 min</option>
                      <option value="60">60 min</option>
                      <option value="90">90 min</option>
                    </select>
                  </div>
                  <div class="form-field">
                    <label>Status</label>
                    <select id="newApptStatus">
                      <option value="confirmed">Confirmed</option>
                      <option value="pending">Pending</option>
                    </select>
                  </div>
                </div>
                <button class="btn-submit" onclick="addAppointment()">Schedule Appointment</button>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div><!-- /content-area -->
  </div><!-- /main-area -->
</div><!-- /appShell -->

<!-- Patient detail panel -->
<div class="patient-detail-overlay" id="patientOverlay" onclick="closePatientDetail(event)">
  <div class="patient-detail-panel" id="patientDetailPanel">
    <div class="detail-close">
      <div style="font-family:'Cormorant Garamond',serif;font-size:1.3rem;font-weight:600;color:var(--navy)">Patient Record</div>
      <button class="detail-close-btn" onclick="closePatientDetailDirect()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>
    <div id="patientDetailContent"></div>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
  <span id="toastMsg"></span>
</div>

<script>
// ══════════════════════════════════════
//  CREDENTIALS
// ══════════════════════════════════════
const CREDS = { username: 'doctor', password: 'ortho2024' };

// ══════════════════════════════════════
//  DATA
// ══════════════════════════════════════
const PATIENTS = [
  { id:'PT-001', name:'Fatima Al-Hassan', dob:'1978-03-14', age:46, gender:'Female', phone:'+966 50 123 4567', email:'fatima.hassan@email.com', diagnosis:'Osteoarthritis – Right Knee', condition:'knee', insurance:'BUPA Arabia', insuranceNo:'BA-778821', visits:[{day:'18',mon:'Feb',type:'Follow-up',note:'Knee pain improvement, reduced swelling'},{day:'04',mon:'Jan',type:'Consultation',note:'Initial assessment, X-ray ordered'},{day:'12',mon:'Nov',type:'Consultation',note:'Referred by GP for knee pain'}], imaging:'AP & Lateral X-ray (Jan 2025) – Grade III OA', color:'c1' },
  { id:'PT-002', name:'Khalid Ibrahim', dob:'1965-07-22', age:59, gender:'Male', phone:'+966 55 987 6543', email:'khalid.ibrahim@email.com', diagnosis:'Lumbar Disc Herniation L4–L5', condition:'spine', insurance:'Tawuniya', insuranceNo:'TW-334455', visits:[{day:'20',mon:'Feb',type:'Review',note:'MRI results discussed, conservative treatment ongoing'},{day:'10',mon:'Jan',type:'MRI Review',note:'L4-L5 herniation confirmed on MRI'},{day:'28',mon:'Dec',type:'Consultation',note:'Back pain radiating to left leg'}], imaging:'MRI Lumbar Spine (Jan 2025) – L4-L5 disc protrusion', color:'c2' },
  { id:'PT-003', name:'Nadia Khoury', dob:'1990-11-05', age:34, gender:'Female', phone:'+966 54 456 7890', email:'nadia.khoury@email.com', diagnosis:'Rotator Cuff Tear – Left Shoulder', condition:'shoulder', insurance:'MedGulf', insuranceNo:'MG-991234', visits:[{day:'22',mon:'Feb',type:'Pre-op',note:'Pre-operative assessment completed'},{day:'15',mon:'Feb',type:'Consultation',note:'MRI confirmed partial tear, surgery scheduled'},{day:'02',mon:'Feb',type:'Initial Visit',note:'Pain and weakness in left shoulder'}], imaging:'MRI Shoulder (Feb 2025) – Partial supraspinatus tear', color:'c3' },
  { id:'PT-004', name:'Ahmed Al-Rashidi', dob:'1972-09-30', age:52, gender:'Male', phone:'+966 56 321 0987', email:'ahmed.rashidi@email.com', diagnosis:'End-stage Knee OA – Right', condition:'knee', insurance:'BUPA Arabia', insuranceNo:'BA-556677', visits:[{day:'21',mon:'Feb',type:'Pre-op',note:'TKR scheduled for Feb 27, consent signed'},{day:'05',mon:'Feb',type:'Planning',note:'Surgical plan reviewed, implant ordered'},{day:'20',mon:'Jan',type:'Review',note:'Conservative treatment failed, surgery recommended'}], imaging:'Weight-bearing X-ray (Jan 2025) – Bone-on-bone OA', color:'c4' },
  { id:'PT-005', name:'Layla Qasim', dob:'1985-04-18', age:39, gender:'Female', phone:'+966 50 654 3210', email:'layla.qasim@email.com', diagnosis:'Patellofemoral Syndrome', condition:'knee', insurance:'Allianz Saudi', insuranceNo:'AS-112233', visits:[{day:'19',mon:'Feb',type:'Follow-up',note:'Responding well to physiotherapy'},{day:'22',mon:'Jan',type:'Consultation',note:'Anterior knee pain during activity'}], imaging:'X-ray (Jan 2025) – Mild patellar tilt', color:'c5' },
  { id:'PT-006', name:'Omar Mansour', dob:'1968-12-01', age:56, gender:'Male', phone:'+966 55 789 0123', email:'omar.mansour@email.com', diagnosis:'Spinal Stenosis L3–L5', condition:'spine', insurance:'Tawuniya', insuranceNo:'TW-667788', visits:[{day:'17',mon:'Feb',type:'Review',note:'Neurogenic claudication, surgery planned'},{day:'08',mon:'Jan',type:'Consultation',note:'Bilateral leg weakness and cramping'}], imaging:'MRI Lumbar (Feb 2025) – Severe stenosis L3-L5', color:'c1' },
];

const APPOINTMENTS = [
  { id:'A01', patientId:'PT-001', patient:'Fatima Al-Hassan', reason:'Post-op Follow-up', date:'2026-02-25', time:'09:00', duration:30, status:'confirmed' },
  { id:'A02', patientId:'PT-002', patient:'Khalid Ibrahim', reason:'MRI Result Review', date:'2026-02-25', time:'09:45', duration:45, status:'confirmed' },
  { id:'A03', patientId:'PT-003', patient:'Nadia Khoury', reason:'Pre-operative Assessment', date:'2026-02-25', time:'11:00', duration:60, status:'confirmed' },
  { id:'A04', patientId:'PT-004', patient:'Ahmed Al-Rashidi', reason:'Surgical Consent', date:'2026-02-25', time:'12:30', duration:30, status:'pending' },
  { id:'A05', patientId:'PT-005', patient:'Layla Qasim', reason:'Physiotherapy Review', date:'2026-02-25', time:'14:00', duration:30, status:'confirmed' },
  { id:'A06', patientId:'PT-006', patient:'Omar Mansour', reason:'Spinal Stenosis Consultation', date:'2026-02-25', time:'15:00', duration:45, status:'confirmed' },
  { id:'A07', patientId:'PT-001', patient:'Fatima Al-Hassan', reason:'X-ray Review', date:'2026-02-26', time:'10:00', duration:30, status:'confirmed' },
  { id:'A08', patientId:'PT-002', patient:'Khalid Ibrahim', reason:'Pain Management Review', date:'2026-02-27', time:'09:30', duration:30, status:'pending' },
  { id:'A09', patientId:'PT-005', patient:'Layla Qasim', reason:'Follow-up', date:'2026-02-28', time:'11:00', duration:30, status:'confirmed' },
  { id:'A10', patientId:'PT-006', patient:'Omar Mansour', reason:'Pre-op Review', date:'2026-03-01', time:'08:00', duration:60, status:'confirmed' },
];

let currentWeekOffset = 0;
let currentFilter = 'all';

// ══════════════════════════════════════
//  LOGIN
// ══════════════════════════════════════
document.getElementById('togglePass').addEventListener('click', () => {
  const p = document.getElementById('password');
  p.type = p.type === 'password' ? 'text' : 'password';
});

function doLogin() {
  const u = document.getElementById('username').value.trim();
  const p = document.getElementById('password').value;
  const err = document.getElementById('loginError');
  const btn = document.getElementById('loginBtn');
  if (!u || !p) { err.classList.add('show'); return; }
  btn.classList.add('loading'); btn.disabled = true;
  setTimeout(() => {
    btn.classList.remove('loading'); btn.disabled = false;
    if (u === CREDS.username && p === CREDS.password) {
      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('appShell').classList.add('show');
      initApp();
    } else {
      err.classList.add('show');
      document.getElementById('password').value = '';
    }
  }, 900);
}
document.getElementById('loginBtn').addEventListener('click', doLogin);
['username','password'].forEach(id => {
  document.getElementById(id).addEventListener('keydown', e => { if (e.key === 'Enter') doLogin(); });
  document.getElementById(id).addEventListener('input', () => document.getElementById('loginError').classList.remove('show'));
});
document.getElementById('logoutBtn').addEventListener('click', () => {
  document.getElementById('appShell').classList.remove('show');
  document.getElementById('loginPage').style.display = '';
  document.getElementById('username').value = '';
  document.getElementById('password').value = '';
});

// ══════════════════════════════════════
//  NAVIGATION
// ══════════════════════════════════════
const titles = { dashboard:'Dashboard', patients:'Patients', appointments:'Appointments' };
function navigate(page) {
  document.querySelectorAll('.nav-item').forEach(n => n.classList.toggle('active', n.dataset.page === page));
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + page).classList.add('active');
  document.getElementById('topbarTitle').textContent = titles[page] || page;
  if (page === 'appointments') renderWeek();
}
document.querySelectorAll('.nav-item').forEach(n => n.addEventListener('click', () => navigate(n.dataset.page)));

// ══════════════════════════════════════
//  INIT
// ══════════════════════════════════════
function initApp() {
  const now = new Date();
  document.getElementById('topbarDate').textContent = now.toLocaleDateString('en-US', { weekday:'long', year:'numeric', month:'long', day:'numeric' });
  renderTodayAppointments();
  renderPatientsGrid();
  renderWeek();
  populatePatientSelect();
  // Set default date for new appointment
  document.getElementById('newApptDate').value = now.toISOString().split('T')[0];
}

// ══════════════════════════════════════
//  TODAY'S APPOINTMENTS (dashboard)
// ══════════════════════════════════════
function renderTodayAppointments() {
  const today = '2026-02-25';
  const list = document.getElementById('todayApptList');
  const todayAppts = APPOINTMENTS.filter(a => a.date === today).slice(0, 6);
  list.innerHTML = todayAppts.map(a => {
    const initials = a.patient.split(' ').map(w=>w[0]).join('').slice(0,2);
    return `<li class="appt-item">
      <div class="appt-time">${a.time}</div>
      <div class="appt-avatar">${initials}</div>
      <div class="appt-info">
        <div class="appt-name">${a.patient}</div>
        <div class="appt-reason">${a.reason}</div>
      </div>
      <span class="status-badge status-${a.status}">${cap(a.status)}</span>
    </li>`;
  }).join('');
}

// ══════════════════════════════════════
//  PATIENTS
// ══════════════════════════════════════
let _filteredPatients = [...PATIENTS];

function renderPatientsGrid(list = _filteredPatients) {
  document.getElementById('patientsGrid').innerHTML = list.map(p => `
    <div class="patient-card" onclick="openPatientDetail('${p.id}')">
      <div class="patient-card-top">
        <div class="patient-avatar-lg ${p.color}">${p.name.split(' ').map(w=>w[0]).join('').slice(0,2)}</div>
        <div>
          <div class="patient-name">${p.name}</div>
          <div class="patient-meta">${p.age} yrs · ${p.gender}</div>
          <div class="patient-id">${p.id}</div>
        </div>
      </div>
      <div class="patient-diag">
        <div class="patient-diag-label">Primary Diagnosis</div>
        ${p.diagnosis}
      </div>
      <div class="patient-card-footer">
        <div class="patient-visits"><span>${p.visits.length}</span> visits recorded</div>
        <button class="patient-btn">View Record <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></button>
      </div>
    </div>
  `).join('');
}

function filterPatients(q) {
  const base = currentFilter === 'all' ? PATIENTS : PATIENTS.filter(p => p.condition === currentFilter);
  _filteredPatients = base.filter(p => p.name.toLowerCase().includes(q.toLowerCase()) || p.diagnosis.toLowerCase().includes(q.toLowerCase()) || p.id.includes(q));
  renderPatientsGrid(_filteredPatients);
}

function filterBy(cond, btn) {
  currentFilter = cond;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  filterPatients(document.getElementById('patientSearch').value);
}

function openPatientDetail(id) {
  const p = PATIENTS.find(x => x.id === id);
  if (!p) return;
  document.getElementById('patientDetailContent').innerHTML = `
    <div style="display:flex;align-items:center;gap:16px;margin-bottom:24px;">
      <div class="patient-avatar-lg ${p.color}" style="width:56px;height:56px;border-radius:14px;font-size:1.3rem;flex-shrink:0">${p.name.split(' ').map(w=>w[0]).join('').slice(0,2)}</div>
      <div>
        <div style="font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:600;color:var(--navy)">${p.name}</div>
        <div style="font-size:0.78rem;color:var(--muted);margin-top:3px">${p.id} · ${p.age} years · ${p.gender}</div>
      </div>
    </div>
    <div class="detail-section">
      <div class="detail-section-title">Personal Information</div>
      <div class="detail-grid">
        <div class="detail-field"><label>Date of Birth</label><p class="highlight">${formatDate(p.dob)}</p></div>
        <div class="detail-field"><label>Phone</label><p>${p.phone}</p></div>
        <div class="detail-field"><label>Email</label><p>${p.email}</p></div>
        <div class="detail-field"><label>Gender</label><p>${p.gender}</p></div>
      </div>
    </div>
    <div class="detail-section">
      <div class="detail-section-title">Clinical</div>
      <div class="detail-grid">
        <div class="detail-field" style="grid-column:1/-1"><label>Primary Diagnosis</label><p class="highlight">${p.diagnosis}</p></div>
        <div class="detail-field" style="grid-column:1/-1"><label>Imaging & Notes</label><p>${p.imaging}</p></div>
      </div>
    </div>
    <div class="detail-section">
      <div class="detail-section-title">Insurance</div>
      <div class="detail-grid">
        <div class="detail-field"><label>Provider</label><p class="highlight">${p.insurance}</p></div>
        <div class="detail-field"><label>Policy Number</label><p>${p.insuranceNo}</p></div>
      </div>
    </div>
    <div class="detail-section">
      <div class="detail-section-title">Visit History</div>
      ${p.visits.map(v => `
        <div class="visit-item">
          <div class="visit-date-badge"><div class="vd">${v.day}</div><div class="vm">${v.mon}</div></div>
          <div class="visit-info"><div class="vi-type">${v.type}</div><div class="vi-note">${v.note}</div></div>
        </div>
      `).join('')}
    </div>
  `;
  document.getElementById('patientOverlay').classList.add('show');
}

function closePatientDetail(e) {
  if (e.target === document.getElementById('patientOverlay')) closePatientDetailDirect();
}
function closePatientDetailDirect() {
  document.getElementById('patientOverlay').classList.remove('show');
}

// ══════════════════════════════════════
//  APPOINTMENTS WEEK VIEW
// ══════════════════════════════════════
const DAYS = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
const MONTHS = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];

function getWeekDates(offset) {
  const base = new Date('2026-02-23'); // Monday of current week
  base.setDate(base.getDate() + offset * 7);
  const days = [];
  for (let i = 0; i < 5; i++) {
    const d = new Date(base);
    d.setDate(d.getDate() + i);
    days.push(d);
  }
  return days;
}

function changeWeek(dir) { currentWeekOffset += dir; renderWeek(); }

function renderWeek() {
  const days = getWeekDates(currentWeekOffset);
  const todayStr = '2026-02-25';
  document.getElementById('weekLabel').textContent = `${days[0].getDate()} ${MONTHS[days[0].getMonth()]} – ${days[4].getDate()} ${MONTHS[days[4].getMonth()]} ${days[0].getFullYear()}`;
  document.getElementById('apptWeekSub').textContent = `Week of ${days[0].getDate()} ${MONTHS[days[0].getMonth()]}`;

  const cols = document.getElementById('weekColumns');
  cols.innerHTML = days.map(d => {
    const dateStr = d.toISOString().split('T')[0];
    const isToday = dateStr === todayStr;
    const dayAppts = [...APPOINTMENTS].filter(a => a.date === dateStr).sort((a,b) => a.time.localeCompare(b.time));
    return `<div class="day-col">
      <div class="day-col-header ${isToday ? 'today' : ''}">
        <div class="dc-dow">${DAYS[d.getDay()]}</div>
        <div class="dc-date">${d.getDate()}</div>
      </div>
      ${dayAppts.map(a => `
        <div class="appt-block ${a.status}" title="${a.patient} — ${a.reason}">
          <div class="appt-block-time">${a.time}</div>
          <div class="appt-block-name">${a.patient.split(' ')[0]} ${a.patient.split(' ').slice(-1)[0]}</div>
          <div class="appt-block-reason">${a.reason}</div>
          <div class="appt-block-dur">${a.duration} min · ${cap(a.status)}</div>
        </div>
      `).join('')}
      ${dayAppts.length === 0 ? '<div style="text-align:center;font-size:0.72rem;color:var(--muted2);padding:14px 0">—</div>' : ''}
    </div>`;
  }).join('');
}

function populatePatientSelect() {
  const sel = document.getElementById('newApptPatient');
  PATIENTS.forEach(p => {
    const opt = document.createElement('option');
    opt.value = p.id;
    opt.textContent = p.name;
    sel.appendChild(opt);
  });
}

function addAppointment() {
  const patId = document.getElementById('newApptPatient').value;
  const reason = document.getElementById('newApptReason').value.trim();
  const date   = document.getElementById('newApptDate').value;
  const time   = document.getElementById('newApptTime').value;
  const dur    = document.getElementById('newApptDuration').value;
  const status = document.getElementById('newApptStatus').value;
  if (!patId || !reason || !date || !time) { showToast('Please fill in all fields.'); return; }
  const pat = PATIENTS.find(p => p.id === patId);
  const newA = {
    id: 'A' + (APPOINTMENTS.length + 1).toString().padStart(2,'0'),
    patientId: patId, patient: pat.name,
    reason, date, time, duration: parseInt(dur), status
  };
  APPOINTMENTS.push(newA);
  renderWeek();
  renderTodayAppointments();
  // Reset form
  document.getElementById('newApptPatient').value = '';
  document.getElementById('newApptReason').value = '';
  document.getElementById('newApptTime').value = '';
  showToast(`Appointment scheduled for ${pat.name}`);
}

// ══════════════════════════════════════
//  HELPERS
// ══════════════════════════════════════
function cap(s) { return s.charAt(0).toUpperCase() + s.slice(1); }
function formatDate(str) {
  const d = new Date(str);
  return d.toLocaleDateString('en-US', { year:'numeric', month:'long', day:'numeric' });
}
function showToast(msg) {
  const t = document.getElementById('toast');
  document.getElementById('toastMsg').textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3200);
}

// Global search hint
document.getElementById('globalSearch').addEventListener('input', function() {
  if (this.value.trim()) {
    navigate('patients');
    document.getElementById('patientSearch').value = this.value;
    filterPatients(this.value);
  }
});
</script>
</body>
</html>
